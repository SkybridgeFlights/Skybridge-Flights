{"ast":null,"code":"// frontend/src/pages/ConfirmBookingOutbound.js\nimport React,{useEffect,useState,useMemo}from'react';import{useParams,useNavigate,useSearchParams}from'react-router-dom';import axios from'axios';import{API_BASE_URL}from'../apiConfig';import'./ConfirmBooking.css';import SeatModal from'../components/SeatModal';import PetDetailsModal from'../components/PetDetailsModal';// ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ObjectId\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const isValidObjectId=id=>typeof id==='string'&&/^[0-9a-fA-F]{24}$/.test(id);const ConfirmBookingOutbound=()=>{const{flightId}=useParams();const[searchParams]=useSearchParams();const navigate=useNavigate();const returnFlightId=searchParams.get('returnFlightId');// ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿ©\nconst[flight,setFlight]=useState(null);// ÿßŸÑŸÖŸÇÿßÿπÿØ\nconst[bookedSeats,setBookedSeats]=useState([]);const[selectedSeat,setSelectedSeat]=useState(null);const[showSeatModal,setShowSeatModal]=useState(false);// ÿßŸÑÿ≠ŸäŸàÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÑŸäŸÅÿ©\nconst[showPetModal,setShowPetModal]=useState(false);const[petDetails,setPetDetails]=useState(null);// ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿßŸÉÿ®\nconst[passenger,setPassenger]=useState({firstName:'',middleName:'',lastName:'',gender:'',birthDate:'',email:'',passportNumber:'',country:'',city:'',street:'',zip:''});// ÿ£Ÿàÿ≤ÿßŸÜ Ÿàÿ±ÿ≥ŸàŸÖ ÿ•ÿ∂ÿßŸÅŸäÿ©\nconst[baseWeight,setBaseWeight]=useState(20);const[extraWeight,setExtraWeight]=useState(0);const[extraPricePer5Kg,setExtraPricePer5Kg]=useState(10);const[seatFee,setSeatFee]=useState(5);// ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ\nconst[paymentMethod,setPaymentMethod]=useState('');// ÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ\nconst[validationErrors,setValidationErrors]=useState({});// ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ\nconst[loadingFlight,setLoadingFlight]=useState(true);const[loadingSeats,setLoadingSeats]=useState(false);// ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä\nconst{extraFee,petFee,totalPrice}=useMemo(()=>{const extra=extraWeight/5*extraPricePer5Kg;const seat=selectedSeat?seatFee:0;const pet=petDetails?25:0;const base=(flight===null||flight===void 0?void 0:flight.price)||0;return{extraFee:extra,petFee:pet,totalPrice:base+extra+seat+pet};},[flight,extraWeight,extraPricePer5Kg,selectedSeat,seatFee,petDetails]);// ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿ© ŸàÿßŸÑŸÖŸÇÿßÿπÿØ\nuseEffect(()=>{const token=localStorage.getItem('token');const fetchFlight=async()=>{try{if(!isValidObjectId(flightId)){alert('The flight you selected is no longer available. Please search again.');navigate('/flights');return;}setLoadingFlight(true);const res=await axios.get(`${API_BASE_URL}/api/flights/${flightId}`);const data=res.data;setFlight(data);// ÿ∂ÿ®ÿ∑ ÿßŸÑŸÇŸäŸÖ ÿ®ŸÜÿßÿ° ÿπŸÑŸâ ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿ∑Ÿäÿ±ÿßŸÜ\nlet allowedWeight=20,extraPer5kg=10,seatPrice=5;if(data.airline==='Lufthansa'){allowedWeight=25;extraPer5kg=15;seatPrice=8;}else if(data.airline==='Emirates'){allowedWeight=30;extraPer5kg=20;seatPrice=10;}if(data.class==='Business')allowedWeight+=10;if(data.class==='First Class')allowedWeight+=20;setBaseWeight(allowedWeight);setExtraPricePer5Kg(extraPer5kg);setSeatFee(seatPrice);}catch(err){var _err$response,_err$response2,_err$response3;console.error('Failed to fetch flight:',err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status,err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data);if((err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)===404){alert('This flight no longer exists. Please search again.');navigate('/flights');}}finally{setLoadingFlight(false);}};const fetchBookedSeats=async()=>{if(!token)return;try{setLoadingSeats(true);const res=await axios.get(`${API_BASE_URL}/api/bookings/flight/${flightId}/seats`,{headers:{Authorization:`Bearer ${token}`}});setBookedSeats(res.data.bookedSeats||[]);}catch(err){console.error('Failed to fetch booked seats:',err);}finally{setLoadingSeats(false);}};fetchFlight();fetchBookedSeats();},[flightId,navigate]);// ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿßŸÉÿ®\nconst handlePassengerChange=e=>{const{name,value}=e.target;setPassenger(prev=>({...prev,[name]:value}));};// ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ\nconst validate=()=>{const required=['firstName','lastName','gender','birthDate','email','passportNumber','country','city','street','zip'];const errs={};required.forEach(f=>{if(!passenger[f])errs[f]=true;});if(!paymentMethod)errs.paymentMethod=true;setValidationErrors(errs);return Object.keys(errs).length===0;};// ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ≠ÿ¨ÿ≤\nconst handleSubmit=async()=>{if(!validate()){alert('Please fill all required fields.');return;}const token=localStorage.getItem('token');if(!token){alert('You must be logged in to continue.');navigate('/login');return;}try{const payload={flightId,seatNumber:selectedSeat||null,extraWeight,totalPrice,paymentMethod,petDetails,passengers:[{name:`${passenger.firstName} ${passenger.middleName||''} ${passenger.lastName}`.trim(),passportNumber:passenger.passportNumber,dateOfBirth:passenger.birthDate,gender:passenger.gender,email:passenger.email}],contact:{email:passenger.email,address:{country:passenger.country,city:passenger.city,street:passenger.street,zip:passenger.zip}},returnFlightId:returnFlightId||null};console.log('Outbound Booking Payload:',payload);const res=await axios.post(`${API_BASE_URL}/api/bookings`,payload,{headers:{Authorization:`Bearer ${token}`}});const outboundBookingId=res.data.bookingId;if(returnFlightId){navigate(`/booking/return/${returnFlightId}?outboundBookingId=${outboundBookingId}`);}else{navigate(`/payment/${outboundBookingId}`);}}catch(error){var _error$response,_error$response$data;console.error('Booking failed:',error);alert((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Booking failed. Please try again.');}};if(loadingFlight)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-5\",children:\"Loading outbound flight details...\"});if(!flight)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-5\",children:\"Could not load the flight.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-booking-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"\\uD83E\\uDDFE Confirm Your Outbound Booking\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"flight-info-summary\",children:[/*#__PURE__*/_jsx(\"strong\",{children:flight.airline}),\" | \",flight.from,\" \\u279C \",flight.to,' ',\"| \",/*#__PURE__*/_jsx(\"strong\",{children:\"Class:\"}),\" \",flight.class||'Economy']}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",type:\"text\",value:passenger.firstName,onChange:handlePassengerChange,className:validationErrors.firstName?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Middle Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"middleName\",type:\"text\",value:passenger.middleName,onChange:handlePassengerChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",type:\"text\",value:passenger.lastName,onChange:handlePassengerChange,className:validationErrors.lastName?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gender *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"gender\",value:passenger.gender,onChange:handlePassengerChange,className:validationErrors.gender?'error-field':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Female\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Date of Birth *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"birthDate\",type:\"date\",value:passenger.birthDate,onChange:handlePassengerChange,className:validationErrors.birthDate?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",value:passenger.email,onChange:handlePassengerChange,className:validationErrors.email?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Passport Number *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"passportNumber\",type:\"text\",value:passenger.passportNumber,onChange:handlePassengerChange,className:validationErrors.passportNumber?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Country *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"country\",type:\"text\",value:passenger.country,onChange:handlePassengerChange,className:validationErrors.country?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"City *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"city\",type:\"text\",value:passenger.city,onChange:handlePassengerChange,className:validationErrors.city?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Street *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"street\",type:\"text\",value:passenger.street,onChange:handlePassengerChange,className:validationErrors.street?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Zip Code *\"}),/*#__PURE__*/_jsx(\"input\",{name:\"zip\",type:\"text\",value:passenger.zip,onChange:handlePassengerChange,className:validationErrors.zip?'error-field':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Extra Baggage\"}),/*#__PURE__*/_jsxs(\"select\",{value:extraWeight,onChange:e=>setExtraWeight(Number(e.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"No extra\"}),/*#__PURE__*/_jsxs(\"option\",{value:5,children:[\"+5 kg (\\u20AC\",extraPricePer5Kg,\")\"]}),/*#__PURE__*/_jsxs(\"option\",{value:10,children:[\"+10 kg (\\u20AC\",extraPricePer5Kg*2,\")\"]})]}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Included: \",baseWeight,\" kg\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"options-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"option-button\",onClick:()=>setShowSeatModal(true),children:[\"\\uD83C\\uDFAB Choose Seat \",selectedSeat&&`(${selectedSeat})`]}),/*#__PURE__*/_jsx(\"button\",{className:\"option-button\",onClick:()=>setShowPetModal(true),children:\"\\uD83D\\uDC3E Add Pet Details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-section\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCB3 Payment Method *\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentMethod,onChange:e=>setPaymentMethod(e.target.value),className:validationErrors.paymentMethod?'error-field':'',children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\"}),/*#__PURE__*/_jsx(\"option\",{value:\"visa\",children:\"Visa\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paypal\",children:\"PayPal\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCB0 Price Breakdown\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Flight: \\u20AC\",flight.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Extra Baggage: \\u20AC\",extraFee]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Seat: \\u20AC\",selectedSeat?seatFee:0]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Pet: \\u20AC\",petFee]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total: \\u20AC\",totalPrice]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"confirm-button-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"confirm-button\",onClick:handleSubmit,children:returnFlightId?'‚úÖ Continue to Return Flight':'‚úÖ Continue to Payment'})})]}),/*#__PURE__*/_jsx(SeatModal,{show:showSeatModal,onClose:()=>setShowSeatModal(false),bookedSeats:bookedSeats,selectedSeat:selectedSeat,onSelectSeat:setSelectedSeat,flightClass:flight.class||'Economy'}),/*#__PURE__*/_jsx(PetDetailsModal,{show:showPetModal,onClose:()=>setShowPetModal(false),petDetails:petDetails,setPetDetails:setPetDetails})]});};export default ConfirmBookingOutbound;","map":{"version":3,"names":["React","useEffect","useState","useMemo","useParams","useNavigate","useSearchParams","axios","API_BASE_URL","SeatModal","PetDetailsModal","jsx","_jsx","jsxs","_jsxs","isValidObjectId","id","test","ConfirmBookingOutbound","flightId","searchParams","navigate","returnFlightId","get","flight","setFlight","bookedSeats","setBookedSeats","selectedSeat","setSelectedSeat","showSeatModal","setShowSeatModal","showPetModal","setShowPetModal","petDetails","setPetDetails","passenger","setPassenger","firstName","middleName","lastName","gender","birthDate","email","passportNumber","country","city","street","zip","baseWeight","setBaseWeight","extraWeight","setExtraWeight","extraPricePer5Kg","setExtraPricePer5Kg","seatFee","setSeatFee","paymentMethod","setPaymentMethod","validationErrors","setValidationErrors","loadingFlight","setLoadingFlight","loadingSeats","setLoadingSeats","extraFee","petFee","totalPrice","extra","seat","pet","base","price","token","localStorage","getItem","fetchFlight","alert","res","data","allowedWeight","extraPer5kg","seatPrice","airline","class","err","_err$response","_err$response2","_err$response3","console","error","response","status","fetchBookedSeats","headers","Authorization","handlePassengerChange","e","name","value","target","prev","validate","required","errs","forEach","f","Object","keys","length","handleSubmit","payload","seatNumber","passengers","trim","dateOfBirth","contact","address","log","post","outboundBookingId","bookingId","_error$response","_error$response$data","className","children","from","to","type","onChange","Number","onClick","show","onClose","onSelectSeat","flightClass"],"sources":["C:/Users/Wajd Shaaban/OneDrive/Desktop/SkybridgeFlights/frontend/src/pages/ConfirmBookingOutbound.js"],"sourcesContent":["// frontend/src/pages/ConfirmBookingOutbound.js\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_BASE_URL } from '../apiConfig';\r\nimport './ConfirmBooking.css';\r\n\r\nimport SeatModal from '../components/SeatModal';\r\nimport PetDetailsModal from '../components/PetDetailsModal';\r\n\r\n// ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿµÿ≠ÿ© ObjectId\r\nconst isValidObjectId = (id) =>\r\n  typeof id === 'string' && /^[0-9a-fA-F]{24}$/.test(id);\r\n\r\nconst ConfirmBookingOutbound = () => {\r\n  const { flightId } = useParams();\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n\r\n  const returnFlightId = searchParams.get('returnFlightId');\r\n\r\n  // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿ©\r\n  const [flight, setFlight] = useState(null);\r\n\r\n  // ÿßŸÑŸÖŸÇÿßÿπÿØ\r\n  const [bookedSeats, setBookedSeats] = useState([]);\r\n  const [selectedSeat, setSelectedSeat] = useState(null);\r\n  const [showSeatModal, setShowSeatModal] = useState(false);\r\n\r\n  // ÿßŸÑÿ≠ŸäŸàÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÑŸäŸÅÿ©\r\n  const [showPetModal, setShowPetModal] = useState(false);\r\n  const [petDetails, setPetDetails] = useState(null);\r\n\r\n  // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿßŸÉÿ®\r\n  const [passenger, setPassenger] = useState({\r\n    firstName: '',\r\n    middleName: '',\r\n    lastName: '',\r\n    gender: '',\r\n    birthDate: '',\r\n    email: '',\r\n    passportNumber: '',\r\n    country: '',\r\n    city: '',\r\n    street: '',\r\n    zip: '',\r\n  });\r\n\r\n  // ÿ£Ÿàÿ≤ÿßŸÜ Ÿàÿ±ÿ≥ŸàŸÖ ÿ•ÿ∂ÿßŸÅŸäÿ©\r\n  const [baseWeight, setBaseWeight] = useState(20);\r\n  const [extraWeight, setExtraWeight] = useState(0);\r\n  const [extraPricePer5Kg, setExtraPricePer5Kg] = useState(10);\r\n  const [seatFee, setSeatFee] = useState(5);\r\n\r\n  // ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ\r\n  const [paymentMethod, setPaymentMethod] = useState('');\r\n\r\n  // ÿ£ÿÆÿ∑ÿßÿ° ÿßŸÑÿ™ÿ≠ŸÇŸÇ\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n\r\n  // ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ\r\n  const [loadingFlight, setLoadingFlight] = useState(true);\r\n  const [loadingSeats, setLoadingSeats] = useState(false);\r\n\r\n  // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÜŸáÿßÿ¶Ÿä\r\n  const { extraFee, petFee, totalPrice } = useMemo(() => {\r\n    const extra = (extraWeight / 5) * extraPricePer5Kg;\r\n    const seat = selectedSeat ? seatFee : 0;\r\n    const pet = petDetails ? 25 : 0;\r\n    const base = flight?.price || 0;\r\n    return {\r\n      extraFee: extra,\r\n      petFee: pet,\r\n      totalPrice: base + extra + seat + pet,\r\n    };\r\n  }, [flight, extraWeight, extraPricePer5Kg, selectedSeat, seatFee, petDetails]);\r\n\r\n  // ÿ¨ŸÑÿ® ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿ© ŸàÿßŸÑŸÖŸÇÿßÿπÿØ\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n\r\n    const fetchFlight = async () => {\r\n      try {\r\n        if (!isValidObjectId(flightId)) {\r\n          alert('The flight you selected is no longer available. Please search again.');\r\n          navigate('/flights');\r\n          return;\r\n        }\r\n\r\n        setLoadingFlight(true);\r\n        const res = await axios.get(`${API_BASE_URL}/api/flights/${flightId}`);\r\n        const data = res.data;\r\n        setFlight(data);\r\n\r\n        // ÿ∂ÿ®ÿ∑ ÿßŸÑŸÇŸäŸÖ ÿ®ŸÜÿßÿ° ÿπŸÑŸâ ÿ¥ÿ±ŸÉÿ© ÿßŸÑÿ∑Ÿäÿ±ÿßŸÜ\r\n        let allowedWeight = 20, extraPer5kg = 10, seatPrice = 5;\r\n        if (data.airline === 'Lufthansa') {\r\n          allowedWeight = 25; extraPer5kg = 15; seatPrice = 8;\r\n        } else if (data.airline === 'Emirates') {\r\n          allowedWeight = 30; extraPer5kg = 20; seatPrice = 10;\r\n        }\r\n\r\n        if (data.class === 'Business') allowedWeight += 10;\r\n        if (data.class === 'First Class') allowedWeight += 20;\r\n\r\n        setBaseWeight(allowedWeight);\r\n        setExtraPricePer5Kg(extraPer5kg);\r\n        setSeatFee(seatPrice);\r\n      } catch (err) {\r\n        console.error('Failed to fetch flight:', err?.response?.status, err?.response?.data);\r\n        if (err?.response?.status === 404) {\r\n          alert('This flight no longer exists. Please search again.');\r\n          navigate('/flights');\r\n        }\r\n      } finally {\r\n        setLoadingFlight(false);\r\n      }\r\n    };\r\n\r\n    const fetchBookedSeats = async () => {\r\n      if (!token) return;\r\n      try {\r\n        setLoadingSeats(true);\r\n        const res = await axios.get(\r\n          `${API_BASE_URL}/api/bookings/flight/${flightId}/seats`,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        setBookedSeats(res.data.bookedSeats || []);\r\n      } catch (err) {\r\n        console.error('Failed to fetch booked seats:', err);\r\n      } finally {\r\n        setLoadingSeats(false);\r\n      }\r\n    };\r\n\r\n    fetchFlight();\r\n    fetchBookedSeats();\r\n  }, [flightId, navigate]);\r\n\r\n  // ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ±ÿßŸÉÿ®\r\n  const handlePassengerChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPassenger((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ\r\n  const validate = () => {\r\n    const required = [\r\n      'firstName', 'lastName', 'gender', 'birthDate', 'email',\r\n      'passportNumber', 'country', 'city', 'street', 'zip'\r\n    ];\r\n    const errs = {};\r\n    required.forEach((f) => { if (!passenger[f]) errs[f] = true; });\r\n    if (!paymentMethod) errs.paymentMethod = true;\r\n    setValidationErrors(errs);\r\n    return Object.keys(errs).length === 0;\r\n  };\r\n\r\n  // ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ≠ÿ¨ÿ≤\r\n  const handleSubmit = async () => {\r\n    if (!validate()) {\r\n      alert('Please fill all required fields.');\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('You must be logged in to continue.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = {\r\n        flightId,\r\n        seatNumber: selectedSeat || null,\r\n        extraWeight,\r\n        totalPrice,\r\n        paymentMethod,\r\n        petDetails,\r\n        passengers: [\r\n          {\r\n            name: `${passenger.firstName} ${passenger.middleName || ''} ${passenger.lastName}`.trim(),\r\n            passportNumber: passenger.passportNumber,\r\n            dateOfBirth: passenger.birthDate,\r\n            gender: passenger.gender,\r\n            email: passenger.email,\r\n          },\r\n        ],\r\n        contact: {\r\n          email: passenger.email,\r\n          address: {\r\n            country: passenger.country,\r\n            city: passenger.city,\r\n            street: passenger.street,\r\n            zip: passenger.zip,\r\n          }\r\n        },\r\n        returnFlightId: returnFlightId || null,\r\n      };\r\n\r\n      console.log('Outbound Booking Payload:', payload);\r\n\r\n      const res = await axios.post(`${API_BASE_URL}/api/bookings`, payload, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      const outboundBookingId = res.data.bookingId;\r\n\r\n      if (returnFlightId) {\r\n        navigate(`/booking/return/${returnFlightId}?outboundBookingId=${outboundBookingId}`);\r\n      } else {\r\n        navigate(`/payment/${outboundBookingId}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Booking failed:', error);\r\n      alert(error?.response?.data?.error || 'Booking failed. Please try again.');\r\n    }\r\n  };\r\n\r\n  if (loadingFlight) return <p className=\"text-center mt-5\">Loading outbound flight details...</p>;\r\n  if (!flight) return <p className=\"text-center mt-5\">Could not load the flight.</p>;\r\n\r\n  return (\r\n    <div className=\"confirm-booking-container\">\r\n      <div className=\"booking-card\">\r\n        <h2 className=\"section-title\">üßæ Confirm Your Outbound Booking</h2>\r\n        <p className=\"flight-info-summary\">\r\n          <strong>{flight.airline}</strong> | {flight.from} ‚ûú {flight.to}{' '}\r\n          | <strong>Class:</strong> {flight.class || 'Economy'}\r\n        </p>\r\n\r\n        {/* ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ±ÿßŸÉÿ® */}\r\n        <div className=\"form-grid\">\r\n          <div className=\"form-group\">\r\n            <label>First Name *</label>\r\n            <input\r\n              name=\"firstName\"\r\n              type=\"text\"\r\n              value={passenger.firstName}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.firstName ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Middle Name</label>\r\n            <input\r\n              name=\"middleName\"\r\n              type=\"text\"\r\n              value={passenger.middleName}\r\n              onChange={handlePassengerChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Last Name *</label>\r\n            <input\r\n              name=\"lastName\"\r\n              type=\"text\"\r\n              value={passenger.lastName}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.lastName ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Gender *</label>\r\n            <select\r\n              name=\"gender\"\r\n              value={passenger.gender}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.gender ? 'error-field' : ''}\r\n            >\r\n              <option value=\"\">Select</option>\r\n              <option>Male</option>\r\n              <option>Female</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Date of Birth *</label>\r\n            <input\r\n              name=\"birthDate\"\r\n              type=\"date\"\r\n              value={passenger.birthDate}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.birthDate ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Email *</label>\r\n            <input\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={passenger.email}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.email ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Passport Number *</label>\r\n            <input\r\n              name=\"passportNumber\"\r\n              type=\"text\"\r\n              value={passenger.passportNumber}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.passportNumber ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Country *</label>\r\n            <input\r\n              name=\"country\"\r\n              type=\"text\"\r\n              value={passenger.country}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.country ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>City *</label>\r\n            <input\r\n              name=\"city\"\r\n              type=\"text\"\r\n              value={passenger.city}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.city ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Street *</label>\r\n            <input\r\n              name=\"street\"\r\n              type=\"text\"\r\n              value={passenger.street}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.street ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n          <label>Zip Code *</label>\r\n            <input\r\n              name=\"zip\"\r\n              type=\"text\"\r\n              value={passenger.zip}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.zip ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          {/* Extra Baggage */}\r\n          <div className=\"form-group\">\r\n            <label>Extra Baggage</label>\r\n            <select\r\n              value={extraWeight}\r\n              onChange={(e) => setExtraWeight(Number(e.target.value))}\r\n            >\r\n              <option value={0}>No extra</option>\r\n              <option value={5}>+5 kg (‚Ç¨{extraPricePer5Kg})</option>\r\n              <option value={10}>+10 kg (‚Ç¨{extraPricePer5Kg * 2})</option>\r\n            </select>\r\n            <small>Included: {baseWeight} kg</small>\r\n          </div>\r\n        </div>\r\n\r\n        {/* ÿÆŸäÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÇÿπÿØ ŸàÿßŸÑÿ≠ŸäŸàÿßŸÜ */}\r\n        <div className=\"options-section\">\r\n          <button\r\n            className=\"option-button\"\r\n            onClick={() => setShowSeatModal(true)}\r\n          >\r\n            üé´ Choose Seat {selectedSeat && `(${selectedSeat})`}\r\n          </button>\r\n          <button\r\n            className=\"option-button\"\r\n            onClick={() => setShowPetModal(true)}\r\n          >\r\n            üêæ Add Pet Details\r\n          </button>\r\n        </div>\r\n\r\n        {/* ÿßŸÑÿØŸÅÿπ */}\r\n        <div className=\"payment-section\">\r\n          <label>üí≥ Payment Method *</label>\r\n          <select\r\n            value={paymentMethod}\r\n            onChange={(e) => setPaymentMethod(e.target.value)}\r\n            className={validationErrors.paymentMethod ? 'error-field' : ''}\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"visa\">Visa</option>\r\n            <option value=\"paypal\">PayPal</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* ÿßŸÑÿ≥ÿπÿ± */}\r\n        <div className=\"price-summary\">\r\n          <h4>üí∞ Price Breakdown</h4>\r\n          <p>Flight: ‚Ç¨{flight.price}</p>\r\n          <p>Extra Baggage: ‚Ç¨{extraFee}</p>\r\n          <p>Seat: ‚Ç¨{selectedSeat ? seatFee : 0}</p>\r\n          <p>Pet: ‚Ç¨{petFee}</p>\r\n          <hr />\r\n          <h3>Total: ‚Ç¨{totalPrice}</h3>\r\n        </div>\r\n\r\n        <div className=\"confirm-button-container\">\r\n          <button className=\"confirm-button\" onClick={handleSubmit}>\r\n            {returnFlightId ? '‚úÖ Continue to Return Flight' : '‚úÖ Continue to Payment'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <SeatModal\r\n        show={showSeatModal}\r\n        onClose={() => setShowSeatModal(false)}\r\n        bookedSeats={bookedSeats}\r\n        selectedSeat={selectedSeat}\r\n        onSelectSeat={setSelectedSeat}\r\n        flightClass={flight.class || 'Economy'}\r\n      />\r\n\r\n      <PetDetailsModal\r\n        show={showPetModal}\r\n        onClose={() => setShowPetModal(false)}\r\n        petDetails={petDetails}\r\n        setPetDetails={setPetDetails}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmBookingOutbound;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}