{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wajd Shaaban\\\\OneDrive\\\\Desktop\\\\SkybridgeFlights\\\\frontend\\\\src\\\\pages\\\\ConfirmBookingReturn.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ConfirmBookingReturn.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../apiConfig';\nimport './ConfirmBooking.css';\nimport SeatModal from '../components/SeatModal';\nimport PetDetailsModal from '../components/PetDetailsModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst isValidObjectId = id => typeof id === 'string' && /^[0-9a-fA-F]{24}$/.test(id);\nconst ConfirmBookingReturn = () => {\n  _s();\n  const {\n    returnFlightId\n  } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const outboundBookingId = searchParams.get('outboundBookingId');\n  const [flight, setFlight] = useState(null);\n  const [bookedSeats, setBookedSeats] = useState([]);\n  const [selectedSeat, setSelectedSeat] = useState(null);\n  const [showSeatModal, setShowSeatModal] = useState(false);\n  const [showPetModal, setShowPetModal] = useState(false);\n  const [petDetails, setPetDetails] = useState(null);\n  const [passenger, setPassenger] = useState({\n    firstName: '',\n    middleName: '',\n    lastName: '',\n    gender: '',\n    birthDate: '',\n    email: '',\n    passportNumber: '',\n    country: '',\n    city: '',\n    street: '',\n    zip: ''\n  });\n  const [baseWeight, setBaseWeight] = useState(20);\n  const [extraWeight, setExtraWeight] = useState(0);\n  const [extraPricePer5Kg, setExtraPricePer5Kg] = useState(10);\n  const [seatFee, setSeatFee] = useState(5);\n  const [validationErrors, setValidationErrors] = useState({});\n  const [loadingFlight, setLoadingFlight] = useState(true);\n  const [loadingSeats, setLoadingSeats] = useState(false);\n  const {\n    extraFee,\n    petFee,\n    totalPrice\n  } = useMemo(() => {\n    const extra = extraWeight / 5 * extraPricePer5Kg;\n    const seat = selectedSeat ? seatFee : 0;\n    const pet = petDetails ? 25 : 0;\n    const base = (flight === null || flight === void 0 ? void 0 : flight.price) || 0;\n    return {\n      extraFee: extra,\n      petFee: pet,\n      totalPrice: base + extra + seat + pet\n    };\n  }, [flight, extraWeight, extraPricePer5Kg, selectedSeat, seatFee, petDetails]);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const validateParams = () => {\n      if (!isValidObjectId(returnFlightId) || !isValidObjectId(outboundBookingId)) {\n        alert('Invalid booking or flight. Please search again.');\n        navigate('/flights');\n        return false;\n      }\n      return true;\n    };\n    const fetchFlight = async () => {\n      try {\n        setLoadingFlight(true);\n        const res = await axios.get(`${API_BASE_URL}/api/flights/${returnFlightId}`);\n        const data = res.data;\n        if (!data) {\n          alert('The return flight you selected is no longer available. Please search again.');\n          navigate('/flights');\n          return;\n        }\n        setFlight(data);\n        let allowedWeight = 20,\n          extraPer5kg = 10,\n          seatPrice = 5;\n        if (data.airline === 'Lufthansa') {\n          allowedWeight = 25;\n          extraPer5kg = 15;\n          seatPrice = 8;\n        } else if (data.airline === 'Emirates') {\n          allowedWeight = 30;\n          extraPer5kg = 20;\n          seatPrice = 10;\n        }\n        if (data.class === 'Business') allowedWeight += 10;\n        if (data.class === 'First Class') allowedWeight += 20;\n        setBaseWeight(allowedWeight);\n        setExtraPricePer5Kg(extraPer5kg);\n        setSeatFee(seatPrice);\n      } catch (err) {\n        var _err$response, _err$response2;\n        console.error('Failed to fetch return flight:', err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status, err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data);\n        alert('The return flight you selected is no longer available. Please search again.');\n        navigate('/flights');\n      } finally {\n        setLoadingFlight(false);\n      }\n    };\n    const fetchBookedSeats = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      try {\n        setLoadingSeats(true);\n        // ŸÑÿßÿ≠ŸÇŸãÿß ŸäŸÖŸÉŸÜ ÿ™ŸÅÿπŸäŸÑ ÿ¨ŸÑÿ® ÿßŸÑŸÖŸÇÿßÿπÿØ ÿßŸÑŸÖÿ≠ÿ¨Ÿàÿ≤ÿ©\n      } catch (err) {\n        console.error('Failed to fetch booked seats:', err);\n      } finally {\n        setLoadingSeats(false);\n      }\n    };\n    if (validateParams()) {\n      fetchFlight();\n      fetchBookedSeats();\n    }\n  }, [returnFlightId, outboundBookingId, navigate]);\n  const handlePassengerChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPassenger(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const validate = () => {\n    const required = ['firstName', 'lastName', 'gender', 'birthDate', 'email', 'passportNumber', 'country', 'city', 'street', 'zip'];\n    const errs = {};\n    required.forEach(f => {\n      if (!passenger[f]) errs[f] = true;\n    });\n    setValidationErrors(errs);\n    return Object.keys(errs).length === 0;\n  };\n  const handleSubmit = async () => {\n    if (!validate()) {\n      alert('Please fill all required fields.');\n      return;\n    }\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('You must be logged in to continue.');\n      navigate('/login');\n      return;\n    }\n    try {\n      const payload = {\n        returnFlightId,\n        passengersReturn: [{\n          name: `${passenger.firstName} ${passenger.middleName || ''} ${passenger.lastName}`.trim(),\n          passportNumber: passenger.passportNumber,\n          dateOfBirth: passenger.birthDate,\n          gender: passenger.gender,\n          email: passenger.email\n        }],\n        seatNumberReturn: selectedSeat || null,\n        extraWeightReturn: extraWeight,\n        totalPriceReturn: totalPrice,\n        petDetailsReturn: petDetails,\n        contactReturn: {\n          email: passenger.email,\n          address: {\n            country: passenger.country,\n            city: passenger.city,\n            street: passenger.street,\n            zip: passenger.zip\n          }\n        }\n      };\n      console.log('Return Booking Payload:', payload);\n\n      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿ¨ÿ≤ ÿßŸÑÿÆÿßÿµ ÿ®ÿßŸÑÿ∞Ÿáÿßÿ® Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•Ÿäÿßÿ® ÿ®ÿ≠ÿßŸÑÿ© pending\n      await axios.put(`${API_BASE_URL}/api/bookings/${outboundBookingId}/attach-return`, payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      navigate(`/payment/${outboundBookingId}`);\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response2, _error$response2$data;\n      console.error('Return booking failed:', error);\n      const msg = (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || (error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Return flight attach failed. Please try again.';\n      alert(msg);\n    }\n  };\n  if (loadingFlight) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center mt-5\",\n      children: \"Loading return flight details...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 12\n    }, this);\n  }\n  if (!flight) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center mt-5\",\n      children: \"The return flight you selected is no longer available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"confirm-booking-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"\\uD83D\\uDD01 Confirm Your Return Flight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flight-info-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: flight.airline\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), \" | \", flight.from, \" \\u279C \", flight.to, ' ', \"| \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Class:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this), \" \", flight.class || 'Economy']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"First Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"firstName\",\n            type: \"text\",\n            value: passenger.firstName,\n            onChange: handlePassengerChange,\n            className: validationErrors.firstName ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Middle Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"middleName\",\n            type: \"text\",\n            value: passenger.middleName,\n            onChange: handlePassengerChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Last Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"lastName\",\n            type: \"text\",\n            value: passenger.lastName,\n            onChange: handlePassengerChange,\n            className: validationErrors.lastName ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Gender *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"gender\",\n            value: passenger.gender,\n            onChange: handlePassengerChange,\n            className: validationErrors.gender ? 'error-field' : '',\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Male\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Female\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Date of Birth *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"birthDate\",\n            type: \"date\",\n            value: passenger.birthDate,\n            onChange: handlePassengerChange,\n            className: validationErrors.birthDate ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"email\",\n            value: passenger.email,\n            onChange: handlePassengerChange,\n            className: validationErrors.email ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Passport Number *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"passportNumber\",\n            type: \"text\",\n            value: passenger.passportNumber,\n            onChange: handlePassengerChange,\n            className: validationErrors.passportNumber ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Country *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"country\",\n            type: \"text\",\n            value: passenger.country,\n            onChange: handlePassengerChange,\n            className: validationErrors.country ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"City *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"city\",\n            type: \"text\",\n            value: passenger.city,\n            onChange: handlePassengerChange,\n            className: validationErrors.city ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Street *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"street\",\n            type: \"text\",\n            value: passenger.street,\n            onChange: handlePassengerChange,\n            className: validationErrors.street ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Zip Code *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"zip\",\n            type: \"text\",\n            value: passenger.zip,\n            onChange: handlePassengerChange,\n            className: validationErrors.zip ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Extra Baggage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: extraWeight,\n            onChange: e => setExtraWeight(Number(e.target.value)),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 0,\n              children: \"No extra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 5,\n              children: [\"+5 kg (\\u20AC\", extraPricePer5Kg, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 10,\n              children: [\"+10 kg (\\u20AC\", extraPricePer5Kg * 2, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"Included: \", baseWeight, \" kg\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"options-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"option-button\",\n          onClick: () => setShowSeatModal(true),\n          children: [\"\\uD83C\\uDFAB Choose Seat \", selectedSeat && `(${selectedSeat})`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"option-button\",\n          onClick: () => setShowPetModal(true),\n          children: \"\\uD83D\\uDC3E Add Pet Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"price-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCB0 Price Breakdown (Return)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Flight: \\u20AC\", flight.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Extra Baggage: \\u20AC\", extraFee]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Seat: \\u20AC\", selectedSeat ? seatFee : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Pet: \\u20AC\", petFee]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Total: \\u20AC\", totalPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirm-button-container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"confirm-button\",\n          onClick: handleSubmit,\n          children: \"\\u2705 Continue to Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SeatModal, {\n      show: showSeatModal,\n      onClose: () => setShowSeatModal(false),\n      bookedSeats: bookedSeats,\n      selectedSeat: selectedSeat,\n      onSelectSeat: setSelectedSeat,\n      flightClass: flight.class || 'Economy'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PetDetailsModal, {\n      show: showPetModal,\n      onClose: () => setShowPetModal(false),\n      petDetails: petDetails,\n      setPetDetails: setPetDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n};\n_s(ConfirmBookingReturn, \"F5OtZoq6USZidPwq+vDjwCl/NuI=\", false, function () {\n  return [useParams, useSearchParams, useNavigate];\n});\n_c = ConfirmBookingReturn;\nexport default ConfirmBookingReturn;\nvar _c;\n$RefreshReg$(_c, \"ConfirmBookingReturn\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useParams","useNavigate","useSearchParams","axios","API_BASE_URL","SeatModal","PetDetailsModal","jsxDEV","_jsxDEV","isValidObjectId","id","test","ConfirmBookingReturn","_s","returnFlightId","searchParams","navigate","outboundBookingId","get","flight","setFlight","bookedSeats","setBookedSeats","selectedSeat","setSelectedSeat","showSeatModal","setShowSeatModal","showPetModal","setShowPetModal","petDetails","setPetDetails","passenger","setPassenger","firstName","middleName","lastName","gender","birthDate","email","passportNumber","country","city","street","zip","baseWeight","setBaseWeight","extraWeight","setExtraWeight","extraPricePer5Kg","setExtraPricePer5Kg","seatFee","setSeatFee","validationErrors","setValidationErrors","loadingFlight","setLoadingFlight","loadingSeats","setLoadingSeats","extraFee","petFee","totalPrice","extra","seat","pet","base","price","token","localStorage","getItem","validateParams","alert","fetchFlight","res","data","allowedWeight","extraPer5kg","seatPrice","airline","class","err","_err$response","_err$response2","console","error","response","status","fetchBookedSeats","handlePassengerChange","e","name","value","target","prev","validate","required","errs","forEach","f","Object","keys","length","handleSubmit","payload","passengersReturn","trim","dateOfBirth","seatNumberReturn","extraWeightReturn","totalPriceReturn","petDetailsReturn","contactReturn","address","log","put","headers","Authorization","_error$response","_error$response$data","_error$response2","_error$response2$data","msg","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","from","to","type","onChange","Number","onClick","show","onClose","onSelectSeat","flightClass","_c","$RefreshReg$"],"sources":["C:/Users/Wajd Shaaban/OneDrive/Desktop/SkybridgeFlights/frontend/src/pages/ConfirmBookingReturn.js"],"sourcesContent":["// frontend/src/pages/ConfirmBookingReturn.js\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_BASE_URL } from '../apiConfig';\r\nimport './ConfirmBooking.css';\r\n\r\nimport SeatModal from '../components/SeatModal';\r\nimport PetDetailsModal from '../components/PetDetailsModal';\r\n\r\nconst isValidObjectId = (id) =>\r\n  typeof id === 'string' && /^[0-9a-fA-F]{24}$/.test(id);\r\n\r\nconst ConfirmBookingReturn = () => {\r\n  const { returnFlightId } = useParams();\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n\r\n  const outboundBookingId = searchParams.get('outboundBookingId');\r\n\r\n  const [flight, setFlight] = useState(null);\r\n  const [bookedSeats, setBookedSeats] = useState([]);\r\n  const [selectedSeat, setSelectedSeat] = useState(null);\r\n  const [showSeatModal, setShowSeatModal] = useState(false);\r\n\r\n  const [showPetModal, setShowPetModal] = useState(false);\r\n  const [petDetails, setPetDetails] = useState(null);\r\n\r\n  const [passenger, setPassenger] = useState({\r\n    firstName: '',\r\n    middleName: '',\r\n    lastName: '',\r\n    gender: '',\r\n    birthDate: '',\r\n    email: '',\r\n    passportNumber: '',\r\n    country: '',\r\n    city: '',\r\n    street: '',\r\n    zip: '',\r\n  });\r\n\r\n  const [baseWeight, setBaseWeight] = useState(20);\r\n  const [extraWeight, setExtraWeight] = useState(0);\r\n  const [extraPricePer5Kg, setExtraPricePer5Kg] = useState(10);\r\n  const [seatFee, setSeatFee] = useState(5);\r\n\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n  const [loadingFlight, setLoadingFlight] = useState(true);\r\n  const [loadingSeats, setLoadingSeats] = useState(false);\r\n\r\n  const { extraFee, petFee, totalPrice } = useMemo(() => {\r\n    const extra = (extraWeight / 5) * extraPricePer5Kg;\r\n    const seat = selectedSeat ? seatFee : 0;\r\n    const pet = petDetails ? 25 : 0;\r\n    const base = flight?.price || 0;\r\n    return {\r\n      extraFee: extra,\r\n      petFee: pet,\r\n      totalPrice: base + extra + seat + pet,\r\n    };\r\n  }, [flight, extraWeight, extraPricePer5Kg, selectedSeat, seatFee, petDetails]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n\r\n    const validateParams = () => {\r\n      if (!isValidObjectId(returnFlightId) || !isValidObjectId(outboundBookingId)) {\r\n        alert('Invalid booking or flight. Please search again.');\r\n        navigate('/flights');\r\n        return false;\r\n      }\r\n      return true;\r\n    };\r\n\r\n    const fetchFlight = async () => {\r\n      try {\r\n        setLoadingFlight(true);\r\n        const res = await axios.get(`${API_BASE_URL}/api/flights/${returnFlightId}`);\r\n        const data = res.data;\r\n        if (!data) {\r\n          alert('The return flight you selected is no longer available. Please search again.');\r\n          navigate('/flights');\r\n          return;\r\n        }\r\n        setFlight(data);\r\n\r\n        let allowedWeight = 20, extraPer5kg = 10, seatPrice = 5;\r\n        if (data.airline === 'Lufthansa') {\r\n          allowedWeight = 25; extraPer5kg = 15; seatPrice = 8;\r\n        } else if (data.airline === 'Emirates') {\r\n          allowedWeight = 30; extraPer5kg = 20; seatPrice = 10;\r\n        }\r\n        if (data.class === 'Business') allowedWeight += 10;\r\n        if (data.class === 'First Class') allowedWeight += 20;\r\n\r\n        setBaseWeight(allowedWeight);\r\n        setExtraPricePer5Kg(extraPer5kg);\r\n        setSeatFee(seatPrice);\r\n      } catch (err) {\r\n        console.error('Failed to fetch return flight:', err?.response?.status, err?.response?.data);\r\n        alert('The return flight you selected is no longer available. Please search again.');\r\n        navigate('/flights');\r\n      } finally {\r\n        setLoadingFlight(false);\r\n      }\r\n    };\r\n\r\n    const fetchBookedSeats = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) return;\r\n      try {\r\n        setLoadingSeats(true);\r\n        // ŸÑÿßÿ≠ŸÇŸãÿß ŸäŸÖŸÉŸÜ ÿ™ŸÅÿπŸäŸÑ ÿ¨ŸÑÿ® ÿßŸÑŸÖŸÇÿßÿπÿØ ÿßŸÑŸÖÿ≠ÿ¨Ÿàÿ≤ÿ©\r\n      } catch (err) {\r\n        console.error('Failed to fetch booked seats:', err);\r\n      } finally {\r\n        setLoadingSeats(false);\r\n      }\r\n    };\r\n\r\n    if (validateParams()) {\r\n      fetchFlight();\r\n      fetchBookedSeats();\r\n    }\r\n  }, [returnFlightId, outboundBookingId, navigate]);\r\n\r\n  const handlePassengerChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPassenger((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const validate = () => {\r\n    const required = [\r\n      'firstName', 'lastName', 'gender', 'birthDate', 'email',\r\n      'passportNumber', 'country', 'city', 'street', 'zip'\r\n    ];\r\n    const errs = {};\r\n    required.forEach((f) => { if (!passenger[f]) errs[f] = true; });\r\n    setValidationErrors(errs);\r\n    return Object.keys(errs).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!validate()) {\r\n      alert('Please fill all required fields.');\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('You must be logged in to continue.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = {\r\n        returnFlightId,\r\n        passengersReturn: [\r\n          {\r\n            name: `${passenger.firstName} ${passenger.middleName || ''} ${passenger.lastName}`.trim(),\r\n            passportNumber: passenger.passportNumber,\r\n            dateOfBirth: passenger.birthDate,\r\n            gender: passenger.gender,\r\n            email: passenger.email,\r\n          },\r\n        ],\r\n        seatNumberReturn: selectedSeat || null,\r\n        extraWeightReturn: extraWeight,\r\n        totalPriceReturn: totalPrice,\r\n        petDetailsReturn: petDetails,\r\n        contactReturn: {\r\n          email: passenger.email,\r\n          address: {\r\n            country: passenger.country,\r\n            city: passenger.city,\r\n            street: passenger.street,\r\n            zip: passenger.zip,\r\n          }\r\n        },\r\n      };\r\n\r\n      console.log('Return Booking Payload:', payload);\r\n\r\n      // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿ¨ÿ≤ ÿßŸÑÿÆÿßÿµ ÿ®ÿßŸÑÿ∞Ÿáÿßÿ® Ÿàÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ•Ÿäÿßÿ® ÿ®ÿ≠ÿßŸÑÿ© pending\r\n      await axios.put(\r\n        `${API_BASE_URL}/api/bookings/${outboundBookingId}/attach-return`,\r\n        payload,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      navigate(`/payment/${outboundBookingId}`);\r\n    } catch (error) {\r\n      console.error('Return booking failed:', error);\r\n      const msg =\r\n        error?.response?.data?.error ||\r\n        error?.response?.data?.message ||\r\n        'Return flight attach failed. Please try again.';\r\n      alert(msg);\r\n    }\r\n  };\r\n\r\n  if (loadingFlight) {\r\n    return <p className=\"text-center mt-5\">Loading return flight details...</p>;\r\n  }\r\n  if (!flight) {\r\n    return <p className=\"text-center mt-5\">The return flight you selected is no longer available.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"confirm-booking-container\">\r\n      <div className=\"booking-card\">\r\n        <h2 className=\"section-title\">üîÅ Confirm Your Return Flight</h2>\r\n        <p className=\"flight-info-summary\">\r\n          <strong>{flight.airline}</strong> | {flight.from} ‚ûú {flight.to}{' '}\r\n          | <strong>Class:</strong> {flight.class || 'Economy'}\r\n        </p>\r\n\r\n        <div className=\"form-grid\">\r\n          <div className=\"form-group\">\r\n            <label>First Name *</label>\r\n            <input name=\"firstName\" type=\"text\" value={passenger.firstName} onChange={handlePassengerChange} className={validationErrors.firstName ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Middle Name</label>\r\n            <input name=\"middleName\" type=\"text\" value={passenger.middleName} onChange={handlePassengerChange} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Last Name *</label>\r\n            <input name=\"lastName\" type=\"text\" value={passenger.lastName} onChange={handlePassengerChange} className={validationErrors.lastName ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Gender *</label>\r\n            <select name=\"gender\" value={passenger.gender} onChange={handlePassengerChange} className={validationErrors.gender ? 'error-field' : ''}>\r\n              <option value=\"\">Select</option>\r\n              <option>Male</option>\r\n              <option>Female</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Date of Birth *</label>\r\n            <input name=\"birthDate\" type=\"date\" value={passenger.birthDate} onChange={handlePassengerChange} className={validationErrors.birthDate ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Email *</label>\r\n            <input name=\"email\" type=\"email\" value={passenger.email} onChange={handlePassengerChange} className={validationErrors.email ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Passport Number *</label>\r\n            <input name=\"passportNumber\" type=\"text\" value={passenger.passportNumber} onChange={handlePassengerChange} className={validationErrors.passportNumber ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Country *</label>\r\n            <input name=\"country\" type=\"text\" value={passenger.country} onChange={handlePassengerChange} className={validationErrors.country ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>City *</label>\r\n            <input name=\"city\" type=\"text\" value={passenger.city} onChange={handlePassengerChange} className={validationErrors.city ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Street *</label>\r\n            <input name=\"street\" type=\"text\" value={passenger.street} onChange={handlePassengerChange} className={validationErrors.street ? 'error-field' : ''} />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Zip Code *</label>\r\n            <input name=\"zip\" type=\"text\" value={passenger.zip} onChange={handlePassengerChange} className={validationErrors.zip ? 'error-field' : ''} />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Extra Baggage</label>\r\n            <select value={extraWeight} onChange={(e) => setExtraWeight(Number(e.target.value))}>\r\n              <option value={0}>No extra</option>\r\n              <option value={5}>+5 kg (‚Ç¨{extraPricePer5Kg})</option>\r\n              <option value={10}>+10 kg (‚Ç¨{extraPricePer5Kg * 2})</option>\r\n            </select>\r\n            <small>Included: {baseWeight} kg</small>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"options-section\">\r\n          <button className=\"option-button\" onClick={() => setShowSeatModal(true)}>\r\n            üé´ Choose Seat {selectedSeat && `(${selectedSeat})`}\r\n          </button>\r\n          <button className=\"option-button\" onClick={() => setShowPetModal(true)}>\r\n            üêæ Add Pet Details\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"price-summary\">\r\n          <h4>üí∞ Price Breakdown (Return)</h4>\r\n          <p>Flight: ‚Ç¨{flight.price}</p>\r\n          <p>Extra Baggage: ‚Ç¨{extraFee}</p>\r\n          <p>Seat: ‚Ç¨{selectedSeat ? seatFee : 0}</p>\r\n          <p>Pet: ‚Ç¨{petFee}</p>\r\n          <hr />\r\n          <h3>Total: ‚Ç¨{totalPrice}</h3>\r\n        </div>\r\n\r\n        <div className=\"confirm-button-container\">\r\n          <button className=\"confirm-button\" onClick={handleSubmit}>\r\n            ‚úÖ Continue to Payment\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <SeatModal\r\n        show={showSeatModal}\r\n        onClose={() => setShowSeatModal(false)}\r\n        bookedSeats={bookedSeats}\r\n        selectedSeat={selectedSeat}\r\n        onSelectSeat={setSelectedSeat}\r\n        flightClass={flight.class || 'Economy'}\r\n      />\r\n\r\n      <PetDetailsModal\r\n        show={showPetModal}\r\n        onClose={() => setShowPetModal(false)}\r\n        petDetails={petDetails}\r\n        setPetDetails={setPetDetails}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmBookingReturn;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}