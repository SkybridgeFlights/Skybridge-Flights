{"ast":null,"code":"// src/pages/AdminPanel.js\nimport'./AdminPanel.css';import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import axios from'axios';import DashboardChart from'../components/DashboardChart';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[settings,setSettings]=useState({allowCancellation:true,cancellationHoursLimit:24});const[loading,setLoading]=useState(true);const[message,setMessage]=useState('');useEffect(()=>{const fetchSettings=async()=>{try{const res=await axios.get('/api/settings/booking');setSettings(res.data);setLoading(false);}catch(err){console.error('Error fetching settings:',err);setLoading(false);}};fetchSettings();},[]);const handleChange=e=>{const{name,type,checked,value}=e.target;setSettings(prev=>({...prev,[name]:type==='checkbox'?checked:Number(value)}));};const handleSave=async()=>{try{await axios.put('/api/settings/booking',settings);setMessage('Settings saved successfully ‚úÖ');}catch(err){setMessage('Failed to save settings ‚ùå');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"admin-panel\",children:\"Loading admin settings...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-sidebar\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDC51 Skybridge Admin Panel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"admin-link\",children:\"\\uD83D\\uDCCA Dashboard\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/booking-settings\",className:\"admin-link\",children:\"\\u2699\\uFE0F Booking Settings\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/manage-staff\",className:\"admin-link\",children:\"\\uD83D\\uDC65 Manage Staff\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/view-visas\",className:\"admin-link\",children:\"\\uD83D\\uDCC4 Visa Applications\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/view-bookings\",className:\"admin-link\",children:\"\\uD83D\\uDCD1 All Bookings\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/audit-logs\",className:\"admin-link\",children:\"\\uD83D\\uDD75\\uFE0F Audit Logs\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/manage-flights\",className:\"admin-link\",children:\"\\u2708\\uFE0F Manage Flights\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-welcome\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCC Welcome, Admin\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Use the navigation on the left to manage system settings, staff, bookings, and visa applications.\"})]}),/*#__PURE__*/_jsx(DashboardChart,{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-settings\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDD27 Booking Cancellation Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"allowCancellation\",name:\"allowCancellation\",checked:settings.allowCancellation,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"allowCancellation\",children:\"Allow Cancellation\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cancellationHoursLimit\",className:\"form-label\",children:\"Hours before flight allowed for cancellation:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"cancellationHoursLimit\",name:\"cancellationHoursLimit\",value:settings.cancellationHoursLimit,min:\"1\",onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:handleSave,children:\"\\uD83D\\uDCBE Save Settings\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:message})]})]})]});};export default AdminPanel;","map":{"version":3,"names":["React","useEffect","useState","Link","axios","DashboardChart","jsx","_jsx","jsxs","_jsxs","AdminPanel","settings","setSettings","allowCancellation","cancellationHoursLimit","loading","setLoading","message","setMessage","fetchSettings","res","get","data","err","console","error","handleChange","e","name","type","checked","value","target","prev","Number","handleSave","put","className","children","to","id","onChange","htmlFor","min","onClick"],"sources":["C:/Users/Wajd Shaaban/OneDrive/Desktop/SkybridgeFlights/frontend/src/pages/AdminPanel.js"],"sourcesContent":["// src/pages/AdminPanel.js\r\nimport './AdminPanel.css';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport DashboardChart from '../components/DashboardChart';\r\n\r\nconst AdminPanel = () => {\r\n  const [settings, setSettings] = useState({ allowCancellation: true, cancellationHoursLimit: 24 });\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchSettings = async () => {\r\n      try {\r\n        const res = await axios.get('/api/settings/booking');\r\n        setSettings(res.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching settings:', err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, type, checked, value } = e.target;\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? checked : Number(value)\r\n    }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await axios.put('/api/settings/booking', settings);\r\n      setMessage('Settings saved successfully ‚úÖ');\r\n    } catch (err) {\r\n      setMessage('Failed to save settings ‚ùå');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"admin-panel\">Loading admin settings...</div>;\r\n\r\n  return (\r\n    <div className=\"admin-panel-container\">\r\n      <div className=\"admin-sidebar\">\r\n        <h2>üëë Skybridge Admin Panel</h2>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin\" className=\"admin-link\">üìä Dashboard</Link>\r\n        </button>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin/booking-settings\" className=\"admin-link\">‚öôÔ∏è Booking Settings</Link>\r\n        </button>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin/manage-staff\" className=\"admin-link\">üë• Manage Staff</Link>\r\n        </button>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin/view-visas\" className=\"admin-link\">üìÑ Visa Applications</Link>\r\n        </button>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin/view-bookings\" className=\"admin-link\">üìë All Bookings</Link>\r\n        </button>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin/audit-logs\" className=\"admin-link\">üïµÔ∏è Audit Logs</Link>\r\n        </button>\r\n        <button className=\"admin-btn\">\r\n          <Link to=\"/admin/manage-flights\" className=\"admin-link\">‚úàÔ∏è Manage Flights</Link>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"admin-content\">\r\n        <div className=\"admin-welcome\">\r\n          <h3>üìå Welcome, Admin</h3>\r\n          <p>Use the navigation on the left to manage system settings, staff, bookings, and visa applications.</p>\r\n        </div>\r\n\r\n        {/* ‚úÖ Dashboard Pie Chart Summary */}\r\n        <DashboardChart />\r\n\r\n        <hr />\r\n        <div className=\"admin-settings\">\r\n          <h4>üîß Booking Cancellation Settings</h4>\r\n          <div className=\"form-check form-switch mb-3\">\r\n            <input\r\n              className=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id=\"allowCancellation\"\r\n              name=\"allowCancellation\"\r\n              checked={settings.allowCancellation}\r\n              onChange={handleChange}\r\n            />\r\n            <label className=\"form-check-label\" htmlFor=\"allowCancellation\">\r\n              Allow Cancellation\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"cancellationHoursLimit\" className=\"form-label\">\r\n              Hours before flight allowed for cancellation:\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              id=\"cancellationHoursLimit\"\r\n              name=\"cancellationHoursLimit\"\r\n              value={settings.cancellationHoursLimit}\r\n              min=\"1\"\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n\r\n          <button className=\"btn btn-success\" onClick={handleSave}>üíæ Save Settings</button>\r\n          {message && <p className=\"mt-3\">{message}</p>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}