{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wajd Shaaban\\\\OneDrive\\\\Desktop\\\\SkybridgeFlights\\\\frontend\\\\src\\\\pages\\\\ConfirmBookingOutbound.js\",\n  _s = $RefreshSig$();\n// frontend/src/pages/ConfirmBookingOutbound.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../apiConfig';\nimport './ConfirmBooking.css';\nimport SeatModal from '../components/SeatModal';\nimport PetDetailsModal from '../components/PetDetailsModal';\n\n// التحقق من صحة ObjectId\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst isValidObjectId = id => typeof id === 'string' && /^[0-9a-fA-F]{24}$/.test(id);\nconst ConfirmBookingOutbound = () => {\n  _s();\n  const {\n    flightId\n  } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const returnFlightId = searchParams.get('returnFlightId');\n\n  // بيانات الرحلة\n  const [flight, setFlight] = useState(null);\n\n  // المقاعد\n  const [bookedSeats, setBookedSeats] = useState([]);\n  const [selectedSeat, setSelectedSeat] = useState(null);\n  const [showSeatModal, setShowSeatModal] = useState(false);\n\n  // الحيوانات الأليفة\n  const [showPetModal, setShowPetModal] = useState(false);\n  const [petDetails, setPetDetails] = useState(null);\n\n  // بيانات الراكب\n  const [passenger, setPassenger] = useState({\n    firstName: '',\n    middleName: '',\n    lastName: '',\n    gender: '',\n    birthDate: '',\n    email: '',\n    passportNumber: '',\n    country: '',\n    city: '',\n    street: '',\n    zip: ''\n  });\n\n  // أوزان ورسوم إضافية\n  const [baseWeight, setBaseWeight] = useState(20);\n  const [extraWeight, setExtraWeight] = useState(0);\n  const [extraPricePer5Kg, setExtraPricePer5Kg] = useState(10);\n  const [seatFee, setSeatFee] = useState(5);\n\n  // طريقة الدفع\n  const [paymentMethod, setPaymentMethod] = useState('');\n\n  // أخطاء التحقق\n  const [validationErrors, setValidationErrors] = useState({});\n\n  // حالة التحميل\n  const [loadingFlight, setLoadingFlight] = useState(true);\n  const [loadingSeats, setLoadingSeats] = useState(false);\n\n  // حساب السعر النهائي\n  const {\n    extraFee,\n    petFee,\n    totalPrice\n  } = useMemo(() => {\n    const extra = extraWeight / 5 * extraPricePer5Kg;\n    const seat = selectedSeat ? seatFee : 0;\n    const pet = petDetails ? 25 : 0;\n    const base = (flight === null || flight === void 0 ? void 0 : flight.price) || 0;\n    return {\n      extraFee: extra,\n      petFee: pet,\n      totalPrice: base + extra + seat + pet\n    };\n  }, [flight, extraWeight, extraPricePer5Kg, selectedSeat, seatFee, petDetails]);\n\n  // جلب بيانات الرحلة والمقاعد\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const fetchFlight = async () => {\n      try {\n        if (!isValidObjectId(flightId)) {\n          alert('The flight you selected is no longer available. Please search again.');\n          navigate('/flights');\n          return;\n        }\n        setLoadingFlight(true);\n        const res = await axios.get(`${API_BASE_URL}/api/flights/${flightId}`);\n        const data = res.data;\n        setFlight(data);\n\n        // ضبط القيم بناء على شركة الطيران\n        let allowedWeight = 20,\n          extraPer5kg = 10,\n          seatPrice = 5;\n        if (data.airline === 'Lufthansa') {\n          allowedWeight = 25;\n          extraPer5kg = 15;\n          seatPrice = 8;\n        } else if (data.airline === 'Emirates') {\n          allowedWeight = 30;\n          extraPer5kg = 20;\n          seatPrice = 10;\n        }\n        if (data.class === 'Business') allowedWeight += 10;\n        if (data.class === 'First Class') allowedWeight += 20;\n        setBaseWeight(allowedWeight);\n        setExtraPricePer5Kg(extraPer5kg);\n        setSeatFee(seatPrice);\n      } catch (err) {\n        var _err$response, _err$response2, _err$response3;\n        console.error('Failed to fetch flight:', err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status, err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data);\n        if ((err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status) === 404) {\n          alert('This flight no longer exists. Please search again.');\n          navigate('/flights');\n        }\n      } finally {\n        setLoadingFlight(false);\n      }\n    };\n    const fetchBookedSeats = async () => {\n      if (!token) return;\n      try {\n        setLoadingSeats(true);\n        const res = await axios.get(`${API_BASE_URL}/api/bookings/flight/${flightId}/seats`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setBookedSeats(res.data.bookedSeats || []);\n      } catch (err) {\n        console.error('Failed to fetch booked seats:', err);\n      } finally {\n        setLoadingSeats(false);\n      }\n    };\n    fetchFlight();\n    fetchBookedSeats();\n  }, [flightId, navigate]);\n\n  // تحديث بيانات الراكب\n  const handlePassengerChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setPassenger(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // تحقق من الحقول\n  const validate = () => {\n    const required = ['firstName', 'lastName', 'gender', 'birthDate', 'email', 'passportNumber', 'country', 'city', 'street', 'zip'];\n    const errs = {};\n    required.forEach(f => {\n      if (!passenger[f]) errs[f] = true;\n    });\n    if (!paymentMethod) errs.paymentMethod = true;\n    setValidationErrors(errs);\n    return Object.keys(errs).length === 0;\n  };\n\n  // إرسال الحجز\n  const handleSubmit = async () => {\n    if (!validate()) {\n      alert('Please fill all required fields.');\n      return;\n    }\n    const token = localStorage.getItem('token');\n    if (!token) {\n      alert('You must be logged in to continue.');\n      navigate('/login');\n      return;\n    }\n    try {\n      const payload = {\n        flightId,\n        seatNumber: selectedSeat || null,\n        extraWeight,\n        totalPrice,\n        paymentMethod,\n        petDetails,\n        passengers: [{\n          name: `${passenger.firstName} ${passenger.middleName || ''} ${passenger.lastName}`.trim(),\n          passportNumber: passenger.passportNumber,\n          dateOfBirth: passenger.birthDate,\n          gender: passenger.gender,\n          email: passenger.email\n        }],\n        contact: {\n          email: passenger.email,\n          address: {\n            country: passenger.country,\n            city: passenger.city,\n            street: passenger.street,\n            zip: passenger.zip\n          }\n        },\n        returnFlightId: returnFlightId || null\n      };\n      console.log('Outbound Booking Payload:', payload);\n      const res = await axios.post(`${API_BASE_URL}/api/bookings`, payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const outboundBookingId = res.data.bookingId;\n      if (returnFlightId) {\n        navigate(`/booking/return/${returnFlightId}?outboundBookingId=${outboundBookingId}`);\n      } else {\n        navigate(`/payment/${outboundBookingId}`);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Booking failed:', error);\n      alert((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Booking failed. Please try again.');\n    }\n  };\n  if (loadingFlight) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-center mt-5\",\n    children: \"Loading outbound flight details...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 29\n  }, this);\n  if (!flight) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-center mt-5\",\n    children: \"Could not load the flight.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"confirm-booking-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"section-title\",\n        children: \"\\uD83E\\uDDFE Confirm Your Outbound Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"flight-info-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: flight.airline\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), \" | \", flight.from, \" \\u279C \", flight.to, ' ', \"| \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Class:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this), \" \", flight.class || 'Economy']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"First Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"firstName\",\n            type: \"text\",\n            value: passenger.firstName,\n            onChange: handlePassengerChange,\n            className: validationErrors.firstName ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Middle Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"middleName\",\n            type: \"text\",\n            value: passenger.middleName,\n            onChange: handlePassengerChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Last Name *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"lastName\",\n            type: \"text\",\n            value: passenger.lastName,\n            onChange: handlePassengerChange,\n            className: validationErrors.lastName ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Gender *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"gender\",\n            value: passenger.gender,\n            onChange: handlePassengerChange,\n            className: validationErrors.gender ? 'error-field' : '',\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Male\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Female\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Date of Birth *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"birthDate\",\n            type: \"date\",\n            value: passenger.birthDate,\n            onChange: handlePassengerChange,\n            className: validationErrors.birthDate ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"email\",\n            value: passenger.email,\n            onChange: handlePassengerChange,\n            className: validationErrors.email ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Passport Number *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"passportNumber\",\n            type: \"text\",\n            value: passenger.passportNumber,\n            onChange: handlePassengerChange,\n            className: validationErrors.passportNumber ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Country *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"country\",\n            type: \"text\",\n            value: passenger.country,\n            onChange: handlePassengerChange,\n            className: validationErrors.country ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"City *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"city\",\n            type: \"text\",\n            value: passenger.city,\n            onChange: handlePassengerChange,\n            className: validationErrors.city ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Street *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"street\",\n            type: \"text\",\n            value: passenger.street,\n            onChange: handlePassengerChange,\n            className: validationErrors.street ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Zip Code *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"zip\",\n            type: \"text\",\n            value: passenger.zip,\n            onChange: handlePassengerChange,\n            className: validationErrors.zip ? 'error-field' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Extra Baggage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: extraWeight,\n            onChange: e => setExtraWeight(Number(e.target.value)),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: 0,\n              children: \"No extra\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 5,\n              children: [\"+5 kg (\\u20AC\", extraPricePer5Kg, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: 10,\n              children: [\"+10 kg (\\u20AC\", extraPricePer5Kg * 2, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: [\"Included: \", baseWeight, \" kg\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"options-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"option-button\",\n          onClick: () => setShowSeatModal(true),\n          children: [\"\\uD83C\\uDFAB Choose Seat \", selectedSeat && `(${selectedSeat})`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"option-button\",\n          onClick: () => setShowPetModal(true),\n          children: \"\\uD83D\\uDC3E Add Pet Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"payment-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uD83D\\uDCB3 Payment Method *\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: paymentMethod,\n          onChange: e => setPaymentMethod(e.target.value),\n          className: validationErrors.paymentMethod ? 'error-field' : '',\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"visa\",\n            children: \"Visa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"paypal\",\n            children: \"PayPal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"price-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCB0 Price Breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Flight: \\u20AC\", flight.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Extra Baggage: \\u20AC\", extraFee]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Seat: \\u20AC\", selectedSeat ? seatFee : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Pet: \\u20AC\", petFee]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Total: \\u20AC\", totalPrice]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"confirm-button-container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"confirm-button\",\n          onClick: handleSubmit,\n          children: returnFlightId ? '✅ Continue to Return Flight' : '✅ Continue to Payment'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SeatModal, {\n      show: showSeatModal,\n      onClose: () => setShowSeatModal(false),\n      bookedSeats: bookedSeats,\n      selectedSeat: selectedSeat,\n      onSelectSeat: setSelectedSeat,\n      flightClass: flight.class || 'Economy'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PetDetailsModal, {\n      show: showPetModal,\n      onClose: () => setShowPetModal(false),\n      petDetails: petDetails,\n      setPetDetails: setPetDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n};\n_s(ConfirmBookingOutbound, \"mNxfqZ2Qn2TzMTiCaG5zRTo+tPg=\", false, function () {\n  return [useParams, useSearchParams, useNavigate];\n});\n_c = ConfirmBookingOutbound;\nexport default ConfirmBookingOutbound;\nvar _c;\n$RefreshReg$(_c, \"ConfirmBookingOutbound\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useParams","useNavigate","useSearchParams","axios","API_BASE_URL","SeatModal","PetDetailsModal","jsxDEV","_jsxDEV","isValidObjectId","id","test","ConfirmBookingOutbound","_s","flightId","searchParams","navigate","returnFlightId","get","flight","setFlight","bookedSeats","setBookedSeats","selectedSeat","setSelectedSeat","showSeatModal","setShowSeatModal","showPetModal","setShowPetModal","petDetails","setPetDetails","passenger","setPassenger","firstName","middleName","lastName","gender","birthDate","email","passportNumber","country","city","street","zip","baseWeight","setBaseWeight","extraWeight","setExtraWeight","extraPricePer5Kg","setExtraPricePer5Kg","seatFee","setSeatFee","paymentMethod","setPaymentMethod","validationErrors","setValidationErrors","loadingFlight","setLoadingFlight","loadingSeats","setLoadingSeats","extraFee","petFee","totalPrice","extra","seat","pet","base","price","token","localStorage","getItem","fetchFlight","alert","res","data","allowedWeight","extraPer5kg","seatPrice","airline","class","err","_err$response","_err$response2","_err$response3","console","error","response","status","fetchBookedSeats","headers","Authorization","handlePassengerChange","e","name","value","target","prev","validate","required","errs","forEach","f","Object","keys","length","handleSubmit","payload","seatNumber","passengers","trim","dateOfBirth","contact","address","log","post","outboundBookingId","bookingId","_error$response","_error$response$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","from","to","type","onChange","Number","onClick","show","onClose","onSelectSeat","flightClass","_c","$RefreshReg$"],"sources":["C:/Users/Wajd Shaaban/OneDrive/Desktop/SkybridgeFlights/frontend/src/pages/ConfirmBookingOutbound.js"],"sourcesContent":["// frontend/src/pages/ConfirmBookingOutbound.js\r\nimport React, { useEffect, useState, useMemo } from 'react';\r\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_BASE_URL } from '../apiConfig';\r\nimport './ConfirmBooking.css';\r\n\r\nimport SeatModal from '../components/SeatModal';\r\nimport PetDetailsModal from '../components/PetDetailsModal';\r\n\r\n// التحقق من صحة ObjectId\r\nconst isValidObjectId = (id) =>\r\n  typeof id === 'string' && /^[0-9a-fA-F]{24}$/.test(id);\r\n\r\nconst ConfirmBookingOutbound = () => {\r\n  const { flightId } = useParams();\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n\r\n  const returnFlightId = searchParams.get('returnFlightId');\r\n\r\n  // بيانات الرحلة\r\n  const [flight, setFlight] = useState(null);\r\n\r\n  // المقاعد\r\n  const [bookedSeats, setBookedSeats] = useState([]);\r\n  const [selectedSeat, setSelectedSeat] = useState(null);\r\n  const [showSeatModal, setShowSeatModal] = useState(false);\r\n\r\n  // الحيوانات الأليفة\r\n  const [showPetModal, setShowPetModal] = useState(false);\r\n  const [petDetails, setPetDetails] = useState(null);\r\n\r\n  // بيانات الراكب\r\n  const [passenger, setPassenger] = useState({\r\n    firstName: '',\r\n    middleName: '',\r\n    lastName: '',\r\n    gender: '',\r\n    birthDate: '',\r\n    email: '',\r\n    passportNumber: '',\r\n    country: '',\r\n    city: '',\r\n    street: '',\r\n    zip: '',\r\n  });\r\n\r\n  // أوزان ورسوم إضافية\r\n  const [baseWeight, setBaseWeight] = useState(20);\r\n  const [extraWeight, setExtraWeight] = useState(0);\r\n  const [extraPricePer5Kg, setExtraPricePer5Kg] = useState(10);\r\n  const [seatFee, setSeatFee] = useState(5);\r\n\r\n  // طريقة الدفع\r\n  const [paymentMethod, setPaymentMethod] = useState('');\r\n\r\n  // أخطاء التحقق\r\n  const [validationErrors, setValidationErrors] = useState({});\r\n\r\n  // حالة التحميل\r\n  const [loadingFlight, setLoadingFlight] = useState(true);\r\n  const [loadingSeats, setLoadingSeats] = useState(false);\r\n\r\n  // حساب السعر النهائي\r\n  const { extraFee, petFee, totalPrice } = useMemo(() => {\r\n    const extra = (extraWeight / 5) * extraPricePer5Kg;\r\n    const seat = selectedSeat ? seatFee : 0;\r\n    const pet = petDetails ? 25 : 0;\r\n    const base = flight?.price || 0;\r\n    return {\r\n      extraFee: extra,\r\n      petFee: pet,\r\n      totalPrice: base + extra + seat + pet,\r\n    };\r\n  }, [flight, extraWeight, extraPricePer5Kg, selectedSeat, seatFee, petDetails]);\r\n\r\n  // جلب بيانات الرحلة والمقاعد\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n\r\n    const fetchFlight = async () => {\r\n      try {\r\n        if (!isValidObjectId(flightId)) {\r\n          alert('The flight you selected is no longer available. Please search again.');\r\n          navigate('/flights');\r\n          return;\r\n        }\r\n\r\n        setLoadingFlight(true);\r\n        const res = await axios.get(`${API_BASE_URL}/api/flights/${flightId}`);\r\n        const data = res.data;\r\n        setFlight(data);\r\n\r\n        // ضبط القيم بناء على شركة الطيران\r\n        let allowedWeight = 20, extraPer5kg = 10, seatPrice = 5;\r\n        if (data.airline === 'Lufthansa') {\r\n          allowedWeight = 25; extraPer5kg = 15; seatPrice = 8;\r\n        } else if (data.airline === 'Emirates') {\r\n          allowedWeight = 30; extraPer5kg = 20; seatPrice = 10;\r\n        }\r\n\r\n        if (data.class === 'Business') allowedWeight += 10;\r\n        if (data.class === 'First Class') allowedWeight += 20;\r\n\r\n        setBaseWeight(allowedWeight);\r\n        setExtraPricePer5Kg(extraPer5kg);\r\n        setSeatFee(seatPrice);\r\n      } catch (err) {\r\n        console.error('Failed to fetch flight:', err?.response?.status, err?.response?.data);\r\n        if (err?.response?.status === 404) {\r\n          alert('This flight no longer exists. Please search again.');\r\n          navigate('/flights');\r\n        }\r\n      } finally {\r\n        setLoadingFlight(false);\r\n      }\r\n    };\r\n\r\n    const fetchBookedSeats = async () => {\r\n      if (!token) return;\r\n      try {\r\n        setLoadingSeats(true);\r\n        const res = await axios.get(\r\n          `${API_BASE_URL}/api/bookings/flight/${flightId}/seats`,\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n        setBookedSeats(res.data.bookedSeats || []);\r\n      } catch (err) {\r\n        console.error('Failed to fetch booked seats:', err);\r\n      } finally {\r\n        setLoadingSeats(false);\r\n      }\r\n    };\r\n\r\n    fetchFlight();\r\n    fetchBookedSeats();\r\n  }, [flightId, navigate]);\r\n\r\n  // تحديث بيانات الراكب\r\n  const handlePassengerChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPassenger((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // تحقق من الحقول\r\n  const validate = () => {\r\n    const required = [\r\n      'firstName', 'lastName', 'gender', 'birthDate', 'email',\r\n      'passportNumber', 'country', 'city', 'street', 'zip'\r\n    ];\r\n    const errs = {};\r\n    required.forEach((f) => { if (!passenger[f]) errs[f] = true; });\r\n    if (!paymentMethod) errs.paymentMethod = true;\r\n    setValidationErrors(errs);\r\n    return Object.keys(errs).length === 0;\r\n  };\r\n\r\n  // إرسال الحجز\r\n  const handleSubmit = async () => {\r\n    if (!validate()) {\r\n      alert('Please fill all required fields.');\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('You must be logged in to continue.');\r\n      navigate('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const payload = {\r\n        flightId,\r\n        seatNumber: selectedSeat || null,\r\n        extraWeight,\r\n        totalPrice,\r\n        paymentMethod,\r\n        petDetails,\r\n        passengers: [\r\n          {\r\n            name: `${passenger.firstName} ${passenger.middleName || ''} ${passenger.lastName}`.trim(),\r\n            passportNumber: passenger.passportNumber,\r\n            dateOfBirth: passenger.birthDate,\r\n            gender: passenger.gender,\r\n            email: passenger.email,\r\n          },\r\n        ],\r\n        contact: {\r\n          email: passenger.email,\r\n          address: {\r\n            country: passenger.country,\r\n            city: passenger.city,\r\n            street: passenger.street,\r\n            zip: passenger.zip,\r\n          }\r\n        },\r\n        returnFlightId: returnFlightId || null,\r\n      };\r\n\r\n      console.log('Outbound Booking Payload:', payload);\r\n\r\n      const res = await axios.post(`${API_BASE_URL}/api/bookings`, payload, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      const outboundBookingId = res.data.bookingId;\r\n\r\n      if (returnFlightId) {\r\n        navigate(`/booking/return/${returnFlightId}?outboundBookingId=${outboundBookingId}`);\r\n      } else {\r\n        navigate(`/payment/${outboundBookingId}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Booking failed:', error);\r\n      alert(error?.response?.data?.error || 'Booking failed. Please try again.');\r\n    }\r\n  };\r\n\r\n  if (loadingFlight) return <p className=\"text-center mt-5\">Loading outbound flight details...</p>;\r\n  if (!flight) return <p className=\"text-center mt-5\">Could not load the flight.</p>;\r\n\r\n  return (\r\n    <div className=\"confirm-booking-container\">\r\n      <div className=\"booking-card\">\r\n        <h2 className=\"section-title\">🧾 Confirm Your Outbound Booking</h2>\r\n        <p className=\"flight-info-summary\">\r\n          <strong>{flight.airline}</strong> | {flight.from} ➜ {flight.to}{' '}\r\n          | <strong>Class:</strong> {flight.class || 'Economy'}\r\n        </p>\r\n\r\n        {/* نموذج الراكب */}\r\n        <div className=\"form-grid\">\r\n          <div className=\"form-group\">\r\n            <label>First Name *</label>\r\n            <input\r\n              name=\"firstName\"\r\n              type=\"text\"\r\n              value={passenger.firstName}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.firstName ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Middle Name</label>\r\n            <input\r\n              name=\"middleName\"\r\n              type=\"text\"\r\n              value={passenger.middleName}\r\n              onChange={handlePassengerChange}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Last Name *</label>\r\n            <input\r\n              name=\"lastName\"\r\n              type=\"text\"\r\n              value={passenger.lastName}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.lastName ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Gender *</label>\r\n            <select\r\n              name=\"gender\"\r\n              value={passenger.gender}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.gender ? 'error-field' : ''}\r\n            >\r\n              <option value=\"\">Select</option>\r\n              <option>Male</option>\r\n              <option>Female</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Date of Birth *</label>\r\n            <input\r\n              name=\"birthDate\"\r\n              type=\"date\"\r\n              value={passenger.birthDate}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.birthDate ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Email *</label>\r\n            <input\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={passenger.email}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.email ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Passport Number *</label>\r\n            <input\r\n              name=\"passportNumber\"\r\n              type=\"text\"\r\n              value={passenger.passportNumber}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.passportNumber ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Country *</label>\r\n            <input\r\n              name=\"country\"\r\n              type=\"text\"\r\n              value={passenger.country}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.country ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>City *</label>\r\n            <input\r\n              name=\"city\"\r\n              type=\"text\"\r\n              value={passenger.city}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.city ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Street *</label>\r\n            <input\r\n              name=\"street\"\r\n              type=\"text\"\r\n              value={passenger.street}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.street ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n          <label>Zip Code *</label>\r\n            <input\r\n              name=\"zip\"\r\n              type=\"text\"\r\n              value={passenger.zip}\r\n              onChange={handlePassengerChange}\r\n              className={validationErrors.zip ? 'error-field' : ''}\r\n            />\r\n          </div>\r\n\r\n          {/* Extra Baggage */}\r\n          <div className=\"form-group\">\r\n            <label>Extra Baggage</label>\r\n            <select\r\n              value={extraWeight}\r\n              onChange={(e) => setExtraWeight(Number(e.target.value))}\r\n            >\r\n              <option value={0}>No extra</option>\r\n              <option value={5}>+5 kg (€{extraPricePer5Kg})</option>\r\n              <option value={10}>+10 kg (€{extraPricePer5Kg * 2})</option>\r\n            </select>\r\n            <small>Included: {baseWeight} kg</small>\r\n          </div>\r\n        </div>\r\n\r\n        {/* خيارات المقعد والحيوان */}\r\n        <div className=\"options-section\">\r\n          <button\r\n            className=\"option-button\"\r\n            onClick={() => setShowSeatModal(true)}\r\n          >\r\n            🎫 Choose Seat {selectedSeat && `(${selectedSeat})`}\r\n          </button>\r\n          <button\r\n            className=\"option-button\"\r\n            onClick={() => setShowPetModal(true)}\r\n          >\r\n            🐾 Add Pet Details\r\n          </button>\r\n        </div>\r\n\r\n        {/* الدفع */}\r\n        <div className=\"payment-section\">\r\n          <label>💳 Payment Method *</label>\r\n          <select\r\n            value={paymentMethod}\r\n            onChange={(e) => setPaymentMethod(e.target.value)}\r\n            className={validationErrors.paymentMethod ? 'error-field' : ''}\r\n          >\r\n            <option value=\"\">Select</option>\r\n            <option value=\"visa\">Visa</option>\r\n            <option value=\"paypal\">PayPal</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* السعر */}\r\n        <div className=\"price-summary\">\r\n          <h4>💰 Price Breakdown</h4>\r\n          <p>Flight: €{flight.price}</p>\r\n          <p>Extra Baggage: €{extraFee}</p>\r\n          <p>Seat: €{selectedSeat ? seatFee : 0}</p>\r\n          <p>Pet: €{petFee}</p>\r\n          <hr />\r\n          <h3>Total: €{totalPrice}</h3>\r\n        </div>\r\n\r\n        <div className=\"confirm-button-container\">\r\n          <button className=\"confirm-button\" onClick={handleSubmit}>\r\n            {returnFlightId ? '✅ Continue to Return Flight' : '✅ Continue to Payment'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <SeatModal\r\n        show={showSeatModal}\r\n        onClose={() => setShowSeatModal(false)}\r\n        bookedSeats={bookedSeats}\r\n        selectedSeat={selectedSeat}\r\n        onSelectSeat={setSelectedSeat}\r\n        flightClass={flight.class || 'Economy'}\r\n      />\r\n\r\n      <PetDetailsModal\r\n        show={showPetModal}\r\n        onClose={() => setShowPetModal(false)}\r\n        petDetails={petDetails}\r\n        setPetDetails={setPetDetails}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmBookingOutbound;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}